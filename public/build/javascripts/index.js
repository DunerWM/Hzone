/*! Hzone 2015-07-30 */
function getCursortPosition(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function setCaretPosition(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}function textareaInput(a){var b,c=document.querySelector("#postStates"),d=getCursortPosition(c),e=c.value||"",f="";if(d==e.length)f=e+a,b=f.length;else{var g=e.substring(0,d),h=e.substring(d);f=g+a+h,b=d+a.length}c.value=f,setCaretPosition(c,b)}function changeTab(a){for(var b=document.querySelectorAll(".emotions-list"),c=0;c<b.length;c++)b[c].style.display="none";document.querySelector("#"+a).style.display="block"}var globalM=angular.module("myapp",[]);globalM.controller("stateFormCtrl",function(a,b){a.state={content:null},a.tabId=null,a.stateSubmit=function(){b({method:"post",url:"/state/send",data:{content:a.state},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){console.log(a.success?a:a.message)})},a.changeTabIdEmotion=function(){a.tabId="emotion"},a.changeTabIdPhoto=function(){a.tabId="photo"},a.changeTabIdBlog=function(){a.tabId="blog"}}),globalM.directive("stateEmotions",function(){return{restrict:"A",templateUrl:"/template/emotions",link:function(a,b,c){emojify.setConfig({only_crawl_id:null,img_dir:"build/images/emoji",ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),emojify.run(),b.find("img").bind("click",function(){textareaInput(this.title)}),b.find("a").bind("click",function(){for(var a=document.querySelectorAll(".emotions-bar a"),b=0;b<a.length;b++)a[b].classList.remove("current");this.classList.add("current"),changeTab(this.getAttribute("data-for"))})}}});